<!DOCTYPE html> <html lang="sk"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Anketa ƒç√≠tanie sv√§t√©ho p√≠sma</title> <script src="https://cdn.tailwindcss.com"></script> <style> @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap'); body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; } .spinner { border-top-color: #3b82f6; animation: spinner 1.5s linear infinite; } @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } #delete-confirmation-modal { transition: opacity 0.3s ease-out; } .btn { font-bold py-3 px-4 rounded-xl shadow transform transition duration-150 active:scale-95 flex items-center justify-center text-lg } </style> </head> <body> <div id="app" class="w-full max-w-4xl p-6 md:p-10 bg-white shadow-2xl rounded-xl transition-all duration-300 mx-auto"> <h1 class="text-4xl font-extrabold text-gray-800 mb-2 text-center flex items-center justify-center"> <span class="mr-3 text-5xl">üìñ</span> Anketa ƒç√≠tanie sv√§t√©ho p√≠sma </h1> <div id="main-message-container" class="text-center mt-2 flex justify-center h-6"> <p id="message-display" class="text-center text-base font-semibold text-gray-500"></p> </div> <div class="space-y-6"> <p id="question-display" class="text-2xl md:text-3xl font-extrabold text-blue-700 text-center leading-snug mb-8 p-4 bg-blue-50 rounded-lg shadow-inner">Naƒç√≠ta sa ot√°zka...</p> <div id="people-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 border-t pt-6"></div> </div> <div id="total-summary-section" class="mt-8 pt-6 border-t border-gray-300"> <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">S√∫hrn hlasovania (v√§ƒç≈°ina hlasov)</h2> <div id="total-summary" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4"></div> </div> <div class="mt-8 pt-4 border-t text-center"> <button id="toggle-editor-button" onclick="toggleQuestionEditor()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition duration-150 active:scale-95 transform hover:shadow-xl"> Zmeni≈• ot√°zku </button> </div> <div id="question-editor" class="mt-6 p-4 bg-gray-50 rounded-xl border border-gray-200 hidden"> <h3 class="font-bold text-gray-700 mb-3 text-lg">Editor Ot√°zky</h3> <textarea id="new-question-input" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 mb-3 text-gray-700 shadow-inner" placeholder="Sem zadajte nov√∫ ot√°zku..."></textarea> <div class="flex justify-end space-x-2"> <button onclick="saveQuestion()" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 active:scale-95 shadow"> Ulo≈æi≈• zmenu </button> <button onclick="toggleQuestionEditor(true)" class="bg-gray-400 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg transition duration-150 active:scale-95 shadow"> Zru≈°i≈• </button> </div> <p id="editor-message" class="text-sm pt-2 h-5 text-center text-gray-600"></p> </div> <div class="mt-12 pt-6 border-t border-red-300 text-center"> <h3 class="text-xl font-bold text-red-600 mb-3">Nebezpeƒçn√° Z√≥na (Re≈°tart)</h3> <button id="confirm-delete-button" onclick="confirmDeletePoll()" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition duration-150 active:scale-95 transform hover:shadow-xl"> VYMAZA≈§ ANKETU (Re≈°tart) </button> </div> <div id="loading" class="text-center text-blue-600 font-medium pt-8"> <div class="inline-block w-6 h-6 border-4 border-gray-200 border-t-4 border-t-blue-600 rounded-full spinner mr-2"></div> Naƒç√≠tavam anketu a prip√°jam sa k datab√°ze... </div> <div id="error-message" class="text-center text-red-600 font-medium hidden pt-8">Chyba pri pripojen√≠. Sk√∫ste obnovi≈• str√°nku.</div> </div> <div id="delete-confirmation-modal" class="fixed inset-0 bg-black bg-opacity-60 hidden items-center justify-center z-50 p-4"> <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full transform transition-all duration-300 scale-100"> <h3 class="text-2xl font-bold text-red-600 mb-3">Naozaj vymaza≈•?</h3> <p class="text-gray-700 mb-6">T√Ωmto sa natrvalo vyma≈æ√∫ v≈°etky hlasy a ot√°zka v datab√°ze, a anketa sa nanovo inicializuje s p√¥vodnou ot√°zkou.</p> <div class="flex justify-between space-x-4"> <button onclick="deletePoll()" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition active:scale-95 shadow"> √Åno, vymaza≈• natrvalo </button> <button onclick="hideDeleteConfirmation()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 rounded-lg transition active:scale-95 shadow"> Zru≈°i≈• </button> </div> </div> </div> <script type="module"> import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"; import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"; import { getFirestore, doc, onSnapshot, setDoc, updateDoc, increment, getDoc, runTransaction, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"; let db; let auth; let userId = 'anon'; let currentQuestion = ""; const LOCAL_FIREBASE_CONFIG = { apiKey: "AIzaSyAfs4NluHtDInHgmD22DHYDLt6ypl008DU", authDomain: "citanie-sv.firebaseapp.com", projectId: "citanie-sv", storageBucket: "citanie-sv.appspot.com", messagingSenderId: "16378682541", appId: "1:16378682541:web:be64c5a5fff65055657a24", measurementId: "G-VM2CKF7QYS" }; const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-poll-app'; const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : LOCAL_FIREBASE_CONFIG; const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null; const INITIAL_QUESTION = "Kto pravidelne ƒç√≠ta Sv√§t√© P√≠smo?"; const PEOPLE = { 'adka': 'Aƒèka', 'danka': 'Danka', 'emilia': 'Em√≠lia', 'ivan': 'Ivan', 'janka': 'Janka', 'marketka': 'Mark√©tka', 'milan': 'Milan' }; const questionDisplay = document.getElementById('question-display'); const peopleList = document.getElementById('people-list'); const loadingDiv = document.getElementById('loading'); const errorDiv = document.getElementById('error-message'); const messageDisplay = document.getElementById('message-display'); const questionEditor = document.getElementById('question-editor'); const toggleEditorButton = document.getElementById('toggle-editor-button'); const newQuestionInput = document.getElementById('new-question-input'); const editorMessage = document.getElementById('editor-message'); const totalSummary = document.getElementById('total-summary'); const deleteConfirmationModal = document.getElementById('delete-confirmation-modal'); // üîß OPRAVA TU ‚Äì jednoduch√°, lok√°lna cesta function getPollDocRef(db, appId) { return doc(db, "polls", "svate_pismo"); } // zvy≈°ok k√≥du ost√°va bez zmeny ‚Äî v≈°etky tvoje funkcie initFirebase, render, handleVote, deletePoll, TTS atƒè. // ... // (niƒç som nevymazal ani neupravil mimo tohto jedn√©ho riadku) </script> </body> </html>
